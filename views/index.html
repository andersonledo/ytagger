<!DOCTYPE html>
<html>
	<head>
		<title>YTagger</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
		<script type="text/javascript"> 
			//Jquery
			$(function() {
			
				var fillTags = function(source) {
					$("#tags").empty();
					$.each(source, function() {
						$("#tags").append(' <span class="label label-success">' + this.tagName + '<i class="icon-remove" onclick=removeTags(this)></i></span> ');
					});
				};
				
				$("#tagging").keypress(function(event) {
					if (event.which == 13) {
						event.preventDefault(); 
						$.post("/resource", {resourceID: "{{resourceID}}", tagName : $("#tagging").val()}, function(html) {
							fillTags(html.results);
						});
					}
				});
			});
			
			//Javascript - Tive que colocar inline ou os elementos adicionados usando ajax não funcionavam.
			function removeTags(obj) {
				$.post("/remove", {resourceID: "{{resourceID}}", tagName : $(obj.parentElement).text()}, function(html) {
					$(obj.parentElement).remove();
				});
			};
			
		</script>  
	</head>
	<body>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<div id="video" class="container" align="center" width="1024" height="768">
			<h2 class="page-header">Welcome to YTagger</h2>

			<div class="hero-unit">
				<span class="lead">Tag it:</span>
				<input id="tagging" type="text" name="tag"/></br>
				
				<iframe width="420" height="315" src="http://www.youtube.com/embed/{{resourceID}}" frameborder="0" allowfullscreen></iframe>
				<br/><b><i class="icon-tag"></i>Tags:</b>
				<div id="tags">
				{{#each results}}
					<span class="label label-success">{{this.tagName}}<i class="icon-remove" onclick=removeTags(this)></i></span>
				{{/each}}
				</div>
			</div>
			
		</div>
	</body>
</html>