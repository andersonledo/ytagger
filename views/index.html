<!DOCTYPE html>
<html>
	<head>
		<title>Teste</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
		<script type="text/javascript"> 
			//Jquery
			$(function() {
			
				var fillTags = function(source) {
					$("#tags").empty();
					$.each(source, function() {
						$("#tags").append(' <span class="label label-success">' + this.tagName + '<i class="icon-remove" onclick=removeTags(this)></i></span> ');
					});
				};
				
				$("#tagging input").keypress(function(event) {
					if (event.which == 13) {
						event.preventDefault(); 
						$.post("/resource", {resourceID: "{{resourceID}}", tagName : $("#tagging input").val()}, function(html) {
							fillTags(html.results);
						});
					}
				});
			});
			
			//Javascript - Tive que colocar inline ou os elementos adicionados usando ajax não funcionavam.
			function removeTags(obj) {
				$.post("/remove", {resourceID: "{{resourceID}}", tagName : $(obj.parentElement).text()}, function(html) {
					$(obj.parentElement).remove();
				});
			};
			
		</script>  
	</head>
	<body>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script src="js/bootstrap.min.js"></script>
		
		<div id="video" class="hero-unit" align="center">
			<h2 align="top">{{title}}</h2>
			<iframe width="420" height="315" src="http://www.youtube.com/embed/{{resourceID}}" frameborder="0" allowfullscreen></iframe>
			<br/><b>Tags:</b>
			<div id="tags">
			{{#each results}}
				<span class="label label-success">{{this.tagName}}<i class="icon-remove" onclick=removeTags(this)></i></span>
			{{/each}}
			</div>
		</div>

		<div id="tagging" align="center">
			  <h4>Tag it:</h4> 
			  <input type="text" name="tag"/><br/>
		</div>
		
		
		
		
		
	</body>
</html>